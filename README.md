# CPR Components

A Next.js component library integrated with Webflow using Webflow CLI's Devlink feature. This project provides pre-built, styled React components exported from Webflow for use in your Next.js applications.

## Table of Contents

- [Overview](#overview)
- [Prerequisites](#prerequisites)
- [Getting Started](#getting-started)
- [Project Structure](#project-structure)
- [Using Components](#using-components)
- [Important: Global Styles](#important-global-styles)
- [Syncing with Webflow](#syncing-with-webflow)
- [Development](#development)

## Overview

This repository contains:
- Next.js 16 application with App Router
- Webflow components synced via Webflow CLI
- TypeScript for type safety
- Tailwind CSS for additional styling
- CSS Modules enabled for component-scoped styles

## Prerequisites

Before you begin, ensure you have:

- **Node.js** (v20 or higher recommended)
- **npm**, **yarn**, **pnpm**, or **bun**
- **Webflow CLI** configured with access to the Webflow project
- A Webflow account with access to the source project

## Getting Started

1. **Clone the repository:**

```bash
git clone <repository-url>
cd cpr-components
```

2. **Install dependencies:**

```bash
npm install
# or
yarn install
# or
pnpm install
# or
bun install
```

3. **Run the development server:**

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

4. **Open your browser:**

Navigate to [http://localhost:3000](http://localhost:3000) to see the application.

## Project Structure

```
cpr-components/
├── app/                    # Next.js app directory
│   ├── layout.tsx         # Root layout (imports devlink/global.css)
│   ├── page.tsx           # Home page
│   └── globals.css        # Additional global styles
├── devlink/               # Webflow components (auto-generated)
│   ├── global.css         # ⚠️ CRITICAL: Webflow global styles
│   ├── *.js               # Component implementations
│   ├── *.d.ts             # TypeScript definitions
│   ├── *.module.css       # Component-scoped styles
│   └── index.js           # Component exports
├── public/                # Static assets
├── webflow.json           # Webflow CLI configuration
└── package.json
```

## Using Components

### Importing Components

Import components from the `@/devlink` directory:

```tsx
import { CprFooter, CprCard } from "@/devlink";

export default function MyPage() {
  return (
    <div>
      <CprCard />
      <CprFooter />
    </div>
  );
}
```

### Available Components

The `devlink/` folder contains numerous pre-built components including:

- **Layout Components:** `CprHeader`, `CprFooter`, `CprSecondFooter`, 

Check the `devlink/index.js` file for the complete list of exported components.

## Important: Global Styles

### ⚠️ Critical Requirement

**You MUST import `@/devlink/global.css` and `globals.css` to import the component


- `devlink/global.css` contains base styles, CSS variables, and Webflow's design system
- Without it, components will appear unstyled or broken
- This file is auto-generated by Webflow CLI and should not be manually edited



### Manual Sync

To pull the latest components and styles from Webflow:

1. **Ensure you have Webflow CLI installed:**

```bash
npm list @webflow/webflow-cli
```

If not installed, it should be in your devDependencies. Install it:

```bash
npm install @webflow/webflow-cli --save-dev
```

2. **Run the sync command:**

```bash
npx webflow sync
```

This command will:
- Connect to your Webflow project (configured in `webflow.json`)
- Download the latest component definitions
- Generate/update TypeScript types
- Update CSS files including `global.css`
- Refresh all component files in the `devlink/` directory

### Configuration

The sync behavior is configured in `webflow.json`:

```json
{
  "devlink": {
    "host": "https://api.webflow.com",
    "rootDir": "./devlink",
    "cssModules": true,
    "relativeHrefRoot": "/"
  }
}
```

- **`rootDir`:** Where components are generated (`./devlink`)
- **`cssModules`:** Enables CSS Modules for scoped styles
- **`relativeHrefRoot`:** Base path for relative links

### Automatic Sync Workflow

For teams, consider setting up automatic syncing:

1. **Add a sync script to `package.json`:**

```json
{
  "scripts": {
    "sync": "webflow sync"
  }
}
```

2. **Run before development:**

```bash
npm run sync && npm run dev
```

3. **Or create a pre-dev hook** (optional):

```json
{
  "scripts": {
    "presync": "webflow sync",
    "dev": "npm run presync && next dev"
  }
}
```

### Best Practices

- **Don't manually edit files in `devlink/`** - they will be overwritten on next sync
- **Commit the `devlink/` directory** to version control so team members have the latest components
- **Sync regularly** when working with designers who update Webflow
- **Review changes** after syncing to understand what's been updated
- **Test after syncing** to ensure no breaking changes

### Staying Up to Date

1. **Check for updates from Webflow:**
   - Coordinate with your design team
   - Ask when components are updated in Webflow

2. **Pull latest code and sync:**

```bash
git pull origin main
npm install
npx webflow sync
npm run dev
```

3. **Verify changes:**
   - Check that `devlink/global.css` is updated
   - Test components in your pages
   - Look for any TypeScript errors

## Development

### Adding New Pages

Create new pages in the `app/` directory:

```tsx
// app/about/page.tsx
import { CprHeader, CprFooter } from "@/devlink";

export default function About() {
  return (
    <div>
      <CprHeader />
      <main>
        <h1>About Us</h1>
      </main>
      <CprFooter />
    </div>
  );
}
```

### Customizing Components

To customize Webflow components without modifying `devlink/` files:

1. **Wrap components:**

```tsx
// components/CustomFooter.tsx
import { CprFooter } from "@/devlink";

export function CustomFooter() {
  return (
    <div className="custom-footer-wrapper">
      <CprFooter />
    </div>
  );
}
```

2. **Use composition:**

```tsx
import { CprCard } from "@/devlink";

export function ProductCard({ title, description }) {
  return (
    <CprCard>
      <h2>{title}</h2>
      <p>{description}</p>
    </CprCard>
  );
}
```

### Linting

```bash
npm run lint
```

## Deployment

### Build for Production

```bash
npm run build
npm run start
```

### Deploy on Vercel

The easiest way to deploy is using [Vercel](https://vercel.com/new):

1. Push your code to GitHub/GitLab/Bitbucket
2. Import your repository in Vercel
3. Vercel will auto-detect Next.js and configure build settings
4. Deploy!

[Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying)

### Other Platforms

This Next.js app can be deployed to any platform that supports Node.js:
- AWS Amplify
- Netlify
- Azure Static Web Apps
- Docker containers

## Troubleshooting

### Components Look Unstyled

**Solution:** Ensure `@/devlink/global.css` is imported in `app/layout.tsx`

### TypeScript Errors After Sync

**Solution:** Restart your TypeScript server in VS Code or run:

```bash
npm run build
```

### Sync Fails

**Solution:** 
1. Check your Webflow CLI authentication
2. Verify `webflow.json` configuration
3. Ensure you have access to the Webflow project

## Learn More

- [Next.js Documentation](https://nextjs.org/docs)
- [Webflow CLI Documentation](https://developers.webflow.com/docs/cli)
- [React Documentation](https://react.dev)
- [TypeScript Documentation](https://www.typescriptlang.org/docs)

## Support

For issues related to:
- **Components/Webflow:** Contact the design team or check Webflow documentation
- **Next.js/React:** Check Next.js documentation or this repository's issues
- **Deployment:** Refer to your hosting platform's documentation
